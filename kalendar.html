<!DOCTYPE html>
<html lang="ru">
    <head>
        <link rel="stylesheet" href="style.css">
        <link rel="icon" href="emblem.jpg" type="image/jpg">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    </head>
    <body>
        <div class="header">
            <button class="menu-button" id="menu-button" onclick="toggleMenu()">
                <svg style= "z-index: 4" class="ham6" viewBox="0 0 100 100" width="80" onclick="this.classList.toggle('active')">
                    <path class="top" d="m 30,33 h 40 c 13.100415,0 14.380204,31.80258 6.899646,33.421777 -24.612039,5.327373 9.016154,-52.337577 -12.75751,-30.563913 l -28.284272,28.284272" />
                    <path class="middle" d="m 70,50 c 0,0 -32.213436,0 -40,0 -7.786564,0 -6.428571,-4.640244 -6.428571,-8.571429 0,-5.895471 6.073743,-11.783399 12.286435,-5.570707 6.212692,6.212692 28.284272,28.284272" />
                    <path class="bottom" d="m 69.575405,67.073826 h -40 c -13.100415,0 -14.380204,-31.80258 -6.899646,-33.421777 24.612039,-5.327373 -9.016154,52.337577 12.75751,30.563913 l 28.284272,-28.284272" />
                </svg>
            </button>
 
            
          <nav> 
           <ul class="navig_list"> 
            <li class="l0">
                <a href="index.html" class="menu-link" style="width: 12em;">главная страница</a>
            </li>
            <li class="l1">
                <a href="onas.html" class="menu-link">О нас</a>
            </li>
            <li class="l2" style="width: 12vw; " >
                <a   class="menu-link" style="width: 12vw; ">Обучение</a>
                <div class="dropdownobuch">
                    <a href="obuchenie.html"  >Курсы</a>
                    <a href="personal.html">Персональные уроки</a>
                </div>
            </li>
            <li class="l3"> 
                <a href="kontakt.html" class="menu-link">контакты</a>
            </li>
            <li class="l4">
                <a href="#" class="menu-link">Новости</a>
            </li>
            <li class="l5">
                <div class="cont_cart">
                    <button class="login-btn" onclick="window.location.href='auten.html'">
                        <img src="avatar-nogender.png" alt="Аватар" class="avatar">
                        <span class="login-text">Войти</span>
                    </button>
                    <div class="carta">
                        <img src="pod.png" alt="podarok" class="pod">
                        <p class="podzavxod">За вход вы получите подарок!</p>
                      </div>
                </div>
            </li>
            </ul>
          </nav>
        
         </div>
    <div class="calendar-container">
        <div class="calendar-header">
            <button onclick="prevMonth()">←</button>
            <div class="current-date" id="currentDate"></div>
            <button onclick="nextMonth()">→</button>
        </div>
        
        <div class="calendar-grid" id="calendar"></div>
        
        <div style="margin-top: 20px; text-align: center;">
            <button onclick="enableMarking()">Пометить день</button>
        </div>
    </div>

    <div class="note-input" id="noteInput">
        <textarea id="noteText" rows="4" cols="30"></textarea>
        <button onclick="saveNote()">Сохранить</button>
        <button onclick="deleteNote()">Удалить заметку</button>
        <button onclick="closeNote()">Закрыть</button>
    </div>
    
    <script>
// 1. Настройка начальных значений
let currentDate = new Date(); // Текущая дата (сегодня)
let selectedDate = null; // Здесь будем хранить выбранную дату
let isMarkingMode = false; // Режим пометки дней (вкл/выкл)
let notes = JSON.parse(localStorage.getItem('notes')) || {}; // Заметки из памяти
let markedDays = JSON.parse(localStorage.getItem('markedDays')) || []; // Помеченные дни из памяти

// 2. Функция создания календаря
function generateCalendar() {
    const calendar = document.getElementById('calendar'); // Находим место для календаря
    calendar.innerHTML = ''; // Очищаем предыдущий календарь

    // 3. Добавляем названия дней недели
    const days = ['Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб', 'Вс'];
    days.forEach(day => {
        const header = document.createElement('div');
        header.className = 'calendar-day-header';
        header.textContent = day;
        calendar.appendChild(header);
    });

    // 4. Настраиваем даты для текущего месяца
    const firstDay = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);
    const lastDay = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);

    // 5. Добавляем пустые ячейки для дней прошлого месяца
    for (let i = 0; i < (firstDay.getDay() || 7) - 1; i++) {
        const emptyDay = document.createElement('div');
        emptyDay.className = 'calendar-day other-month';
        calendar.appendChild(emptyDay);
    }

    // 6. Создаем ячейки для всех дней текущего месяца
    for (let day = 1; day <= lastDay.getDate(); day++) {
        const date = new Date(currentDate.getFullYear(), currentDate.getMonth(), day);
        const dayElement = document.createElement('div');
        dayElement.className = `calendar-day${markedDays.includes(date.toDateString()) ? ' marked' : ''}`;
        dayElement.innerHTML = `<div>${day}</div>${notes[date.toDateString()] ? `<small>${notes[date.toDateString()]}</small>` : ''}`;
        dayElement.addEventListener('click', () => handleDayClick(date));
        calendar.appendChild(dayElement);
    }

    // 7. Добавляем пустые ячейки для выравнивания сетки
    const totalCells = document.querySelectorAll('.calendar-day, .calendar-day-header').length;
    const remaining = (7 - (totalCells % 7)) % 7;
    for (let i = 0; i < remaining; i++) {
        const emptyDay = document.createElement('div');
        emptyDay.className = 'calendar-day other-month';
        calendar.appendChild(emptyDay);
    }

    // 8. Обновляем заголовок с месяцем и годом
    document.getElementById('currentDate').textContent = 
        currentDate.toLocaleDateString('ru', { month: 'long', year: 'numeric' });
}

// 9. Обработчик клика по дню
function handleDayClick(date) {
    if (date.getMonth() !== currentDate.getMonth()) return;
    
    if (isMarkingMode) {
        markedDays.push(date.toDateString());
        localStorage.setItem('markedDays', JSON.stringify(markedDays));
        generateCalendar();
        isMarkingMode = false;
    } else {
        selectedDate = date;
        document.getElementById('noteText').value = notes[date.toDateString()] || '';
        document.getElementById('noteInput').style.display = 'block';
    }
}

// 10. Переключение на предыдущий месяц
function prevMonth() {
    currentDate.setMonth(currentDate.getMonth() - 1);
    generateCalendar();
}

// 11. Переключение на следующий месяц
function nextMonth() {
    currentDate.setMonth(currentDate.getMonth() + 1);
    generateCalendar();
}

// 12. Включение режима пометки
function enableMarking() {
    isMarkingMode = true;
    alert('Выберите день для пометки');
}

// 13. Сохранение заметки
function saveNote() {
    notes[selectedDate.toDateString()] = document.getElementById('noteText').value;
    localStorage.setItem('notes', JSON.stringify(notes));
    closeNote();
    generateCalendar();
}

// 14. Удаление заметки
function deleteNote() {
    if (selectedDate && notes[selectedDate.toDateString()]) {
        delete notes[selectedDate.toDateString()];
        localStorage.setItem('notes', JSON.stringify(notes));
        closeNote();
        generateCalendar();
    }
}

// 15. Закрытие формы с заметкой
function closeNote() {
    document.getElementById('noteInput').style.display = 'none';
}

// 16. Запуск календаря при загрузке страницы
generateCalendar();
    </script>
</body>
</html>
